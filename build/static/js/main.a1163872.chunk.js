(this.webpackJsonpendurance=this.webpackJsonpendurance||[]).push([[0],{36:function(e,t,r){},55:function(e,t,r){},56:function(e,t,r){},63:function(e,t,r){},64:function(e,t,r){"use strict";r.r(t);var n=r(2),c=r.n(n),o=r(37),a=r.n(o),i=(r(55),r(56),r(10)),s=r(69),u=r(0),l=r(38),f=Object(l.a)((function(e,t){var r;return{set:e,get:t,score:0,level:0,gameOver:!1,gameStarted:!1,musicEnabled:null!==(r=JSON.parse(localStorage.getItem("musicEnabled")))&&void 0!==r&&r,isSpeedingUp:!1,controls:{left:!1,right:!1},directionalLight:Object(n.createRef)(),camera:Object(n.createRef)(),ship:Object(n.createRef)(),sun:Object(n.createRef)(),sfx:Object(n.createRef)(),hasInteracted:!1,setHasInteracted:function(){return e((function(e){return{hasInteracted:!0}}))},setIsSpeedingUp:function(t){return e((function(e){return{isSpeedingUp:t}}))},incrementLevel:function(){return e((function(e){return{level:e.level+1}}))},setScore:function(t){return e((function(e){return{score:t}}))},setGameStarted:function(t){return e((function(e){return{gameStarted:t}}))},setGameOver:function(t){return e((function(e){return{gameOver:t}}))},enableMusic:function(t){return e((function(e){return{musicEnabled:t}}))}}})),j={gameOver:!1,score:0,gameSpeed:0,desiredSpeed:0,horizontalVelocity:0,colorLevel:0,shouldShiftItems:!1,currentMusicLevel:0,currentLevelLength:0,globalColor:new u.Color},b=r(9),d=r(11),m=r(70),O=r(66),h=r(71),p=r.p+"static/media/spaceship.e86972b1.gltf",x=r.p+"static/media/noise.2793ebd0.png",g=r.p+"static/media/enginetextureflip.d0f77b17.png",v=r(6),y=new u.Vector3;function S(e,t){var r=t.children,c=Object(m.a)(p,"https://www.gstatic.com/draco/versioned/decoders/1.4.0/"),o=c.nodes,a=c.materials,s=f((function(e){return e.ship})),l=f((function(e){return e.camera})),S=Object(n.useRef)(),w=Object(n.useRef)(),M=Object(n.useRef)(),z=Object(n.useRef)(),R=Object(O.a)(x),_=Object(O.a)(g),E=Object(n.useRef)(),C=Object(n.useRef)(),L=Object(n.useRef)(),V=Object(i.f)().clock,I=f((function(e){return e.gameStarted})),P=f((function(e){return e.gameOver})),N=Object(n.useRef)(f.getState().controls);Object(n.useEffect)((function(){return f.subscribe((function(e){return N.current=e}),(function(e){return e.controls}))}),[]),Object(n.useLayoutEffect)((function(){l.current.rotation.set(0,Math.PI,0),l.current.position.set(0,4,-9),l.current.lookAt(y.set(s.current.position.x,s.current.position.y,s.current.position.z+10)),l.current.rotation.z=Math.PI,s.current.rotation.y=Math.PI}),[s,l]),Object(n.useLayoutEffect)((function(){!I||P?(w.current.material.visible=!1,M.current.material.visible=!1,z.current.material.visible=!1,E.current.material.visible=!1,C.current.material.visible=!1,S.current.visible=!1):(w.current.material.visible=!0,M.current.material.visible=!0,z.current.material.visible=!0,E.current.material.visible=!0,C.current.material.visible=!0,S.current.visible=!0)}),[I,P]),Object(n.useLayoutEffect)((function(){R.wrapS=R.wrapT=u.MirroredRepeatWrapping,R.repeat.set(1,1),R.anisotropy=16,_.wrapS=_.wrapT=u.MirroredRepeatWrapping,_.repeat.set(1,1),_.anisotropy=16}),[R,_]);var k=Object(n.useState)((function(){return[new u.Vector2(.2,.8),new u.Vector2(.1,0),new u.Vector2(.3,1.5),new u.Vector2(.4,1.9),new u.Vector2(.01,7)]})),B=Object(d.a)(k,1)[0],A=Object(n.useState)((function(){return[new u.Vector2(.2,0),new u.Vector2(.5,2),new u.Vector2(.01,8)]})),F=Object(d.a)(A,1)[0],T=Object(n.useState)((function(){return[new u.Vector2(.01,0),new u.Vector2(.3,.8),new u.Vector2(.4,1.5),new u.Vector2(.5,1.9),new u.Vector2(.01,9)]})),G=Object(d.a)(T,1)[0],U=Object(n.useRef)(.7);return Object(i.d)((function(e,t){var r=1*t*2,n=V.getElapsedTime(),c=Math.sin(5*n),o=Math.sin(10*n),a=Math.sin(15*n),i=N.current,u=i.left,f=i.right;C.current.scale.x=a/50,C.current.scale.y=o/50,E.current.scale.x=a/50,E.current.scale.y=o/50,s.current.position.z-=j.gameSpeed*t*165,j.gameOver&&(j.horizontalVelocity=0),s.current.position.x+=j.horizontalVelocity*t*165,s.current.rotation.z=1.5*j.horizontalVelocity,s.current.rotation.y=Math.PI-.4*j.horizontalVelocity,s.current.rotation.x=-Math.abs(j.horizontalVelocity)/10,s.current.position.y-=c/200,s.current.rotation.x+=c/100,s.current.rotation.z+=Math.sin(4*n)/100,S.current.position.z=s.current.position.z+1,S.current.position.x=s.current.position.x,S.current.position.y-=c/80,l.current.position.z=s.current.position.z+13.5,l.current.position.y=s.current.position.y+5,l.current.position.x=s.current.position.x,l.current.rotation.y=Math.PI,(u&&f||!u&&!f)&&(j.horizontalVelocity<0&&(j.horizontalVelocity+r>0?j.horizontalVelocity=0:j.horizontalVelocity+=r),j.horizontalVelocity>0&&(j.horizontalVelocity-r<0?j.horizontalVelocity=0:j.horizontalVelocity-=r)),!j.gameOver&&j.gameSpeed>0&&(u&&!f&&(j.horizontalVelocity=Math.max(-.7,j.horizontalVelocity-r),C.current.scale.x=a/30,C.current.scale.y=c/30,E.current.scale.x=a/200,E.current.scale.y=c/200),!u&&f&&(j.horizontalVelocity=Math.min(.7,j.horizontalVelocity+r),E.current.scale.x=a/30,E.current.scale.y=c/30,C.current.scale.x=a/200,C.current.scale.y=c/200)),S.current.intensity=20-a/15,z.current.material.map.offset.y+=.01*(.4+j.gameSpeed)*t*165,M.current.material.map.offset.y-=.01*(.4+j.gameSpeed)*t*165,j.desiredSpeed>j.gameSpeed?(S.current.intensity=30-a/15,U.current<.95&&(U.current+.005*t*165>.95?U.current=.95:U.current+=.005*t*165)):U.current>.7&&(U.current-.005*t*165<.7?U.current=.7:U.current-=.005*t*165);var b=j.currentMusicLevel>.8?j.currentMusicLevel+.2:1;w.current.scale.z=a/15,w.current.scale.x=(U.current+a/15)*b,M.current.scale.z=a/15,M.current.scale.x=(.85+a/15)*b,z.current.scale.z=.9+a/15,z.current.scale.x=(.9+a/15)*b,L.current.material.color=j.globalColor})),Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("pointLight",{ref:S,color:"tomato",decay:10,distance:40,intensity:5,position:[0,3,-5]}),Object(v.jsx)(h.a,{makeDefault:!0,ref:l,fov:75,rotation:[0,Math.PI,0],position:[0,10,-10]}),Object(v.jsxs)("group",Object(b.a)(Object(b.a)({castShadow:!0,receiveShadow:!0,ref:s,position:[0,3,-10]},e),{},{dispose:null,children:[r,Object(v.jsx)("mesh",{geometry:o.Ship_Body.geometry,children:Object(v.jsx)("meshStandardMaterial",{attach:"material",color:"lightblue",metalness:.8,reflectivity:1,clearcoat:1,roughness:0})}),Object(v.jsx)("mesh",{receiveShadow:!0,castShadow:!0,geometry:o.Ship_Body_1.geometry,material:a.Chassis}),Object(v.jsx)("mesh",{geometry:o.Ship_Body_2.geometry,children:Object(v.jsx)("meshBasicMaterial",{attach:"material",color:"orange"})}),Object(v.jsx)("mesh",{receiveShadow:!0,castShadow:!0,geometry:o.Ship_Body_3.geometry,material:a["Gray Metal"]}),Object(v.jsx)("mesh",{ref:L,geometry:o.Ship_Body_4.geometry,children:Object(v.jsx)("meshLambertMaterial",{attach:"material",color:"white"})}),Object(v.jsxs)("mesh",{ref:E,scale:[.1,.05,2],position:[1.4,.2,-7],children:[Object(v.jsx)("dodecahedronBufferGeometry",{args:[1.5,3]}),Object(v.jsx)("meshBasicMaterial",{transparent:!0,opacity:.8,color:"white"})]}),Object(v.jsxs)("mesh",{ref:C,scale:[.1,.05,2],position:[-1.4,.2,-7],children:[Object(v.jsx)("dodecahedronBufferGeometry",{args:[1.5,3]}),Object(v.jsx)("meshBasicMaterial",{transparent:!0,opacity:.8,color:"white"})]}),Object(v.jsxs)("mesh",{visible:!0,ref:w,position:[0,-.3,.3],rotation:[Math.PI/2,0,Math.PI],children:[Object(v.jsx)("latheBufferGeometry",{args:[B,20]}),Object(v.jsx)("meshLambertMaterial",{transparent:!0,opacity:1,color:"white"})]}),Object(v.jsxs)("mesh",{visible:!0,ref:M,position:[0,-.3,.25],rotation:[Math.PI/2,0,Math.PI],children:[Object(v.jsx)("latheBufferGeometry",{args:[F,30]}),Object(v.jsx)("meshLambertMaterial",{transparent:!0,opacity:.8,map:R,color:11184810,emissive:"red",emissiveIntensity:1})]}),Object(v.jsxs)("mesh",{visible:!0,ref:z,position:[0,-.3,0],rotation:[Math.PI/2,0,Math.PI],children:[Object(v.jsx)("latheBufferGeometry",{args:[G,50]}),Object(v.jsx)("meshLambertMaterial",{transparent:!0,alphaMap:_,map:_,color:"hotpink"})]})]}))]})}function w(){return Object(v.jsxs)("mesh",{visible:!0,position:[0,.87,0],rotation:[0,0,0],children:[Object(v.jsx)("sphereGeometry",{attach:"geometry",args:[1,16,16]}),Object(v.jsx)("meshStandardMaterial",{attach:"material",color:"black",transparent:!0,opacity:1,roughness:1,metalness:0})]})}function M(e){var t=e.children;return Object(v.jsx)(n.Suspense,{fallback:Object(v.jsx)(w,{}),children:Object(v.jsx)(S,{children:t})})}m.a.preload(p,"https://www.gstatic.com/draco/versioned/decoders/1.4.0/");var z=r(67),R=r.p+"static/media/galaxy.a37e4a35.jpg",_=1e3,E=-300,C=300,L=15,V=20,I=40,P=[{name:"red",hex:"#ff2919",three:new u.Color(16722201)},{name:"pink",hex:"#ff69b4",three:new u.Color(16720272)},{name:"orange",hex:"#bd4902",three:new u.Color(12404994)},{name:"green",hex:"#26a300",three:new u.Color(2532096)},{name:"blue",hex:"#217aff",three:new u.Color(2124246)},{name:"purple",hex:"#9370D8",three:new u.Color(6898360)},{name:"white",hex:"#ffffff",three:new u.Color(7039851)},{name:"black",hex:"#000000",three:new u.Color(13421772)}];function N(){var e=Object(i.f)().clock,t=f((function(e){return e.sun})),r=f((function(e){return e.ship})),c=Object(n.useMemo)((function(){return new u.Color(1,.694,.168)}),[]);return Object(i.d)((function(n,c){r.current&&(t.current.position.z=r.current.position.z-2e3,t.current.position.x=r.current.position.x);var o=j.currentMusicLevel;t.current.scale.x+=Math.sin(3*e.getElapsedTime())/3e3,t.current.scale.y+=Math.sin(3*e.getElapsedTime())/3e3,o>=.8&&t.current.scale.x<1.05?(t.current.scale.x+=o*c*2,t.current.scale.y+=o*c*2):t.current.scale.x>1&&(t.current.scale.x-=o*c*.5,t.current.scale.y-=o*c*.5)})),Object(v.jsxs)("mesh",{ref:t,position:[0,0,-2e3],children:[Object(v.jsx)("sphereGeometry",{attach:"geometry",args:[300,30,30]}),Object(v.jsx)("meshStandardMaterial",{fog:!1,emissive:c,emissiveIntensity:1,attach:"material",color:P[1].three})]})}function k(){var e=Object(O.a)(R),t=Object(n.useRef)(),r=Object(n.useRef)(),c=f((function(e){return e.ship}));return Object(n.useLayoutEffect)((function(){e.wrapS=e.wrapT=u.MirroredRepeatWrapping,e.repeat.set(1.8,1.8),e.anisotropy=16}),[e]),Object(i.d)((function(e,n){t.current.rotation.z+=.02*n*j.gameSpeed,r.current.rotation.z+=.02*n*j.gameSpeed,t.current.emissive=j.globalColor,c.current&&(t.current.position.x=c.current.position.x,r.current.position.x=c.current.position.x,t.current.position.z=c.current.position.z,r.current.position.z=c.current.position.z)})),Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(z.a,{ref:r,radius:800,depth:100,count:1e4,factor:40,saturation:1,fade:!0}),Object(v.jsxs)("mesh",{ref:t,position:[0,10,-50],rotation:[0,0,Math.PI],children:[Object(v.jsx)("hemisphereLight",{intensity:.7}),Object(v.jsx)("sphereGeometry",{attach:"geometry",args:[2e3,10,10]}),Object(v.jsx)("meshPhongMaterial",{emissive:P[0].three,emissiveIntensity:.1,fog:!1,side:u.BackSide,attach:"material",map:e})]})]})}function B(){var e=Object(n.useRef)();return Object(i.d)((function(t,r){e.current.near=100,e.current.far=800,e.current.color=j.globalColor})),Object(v.jsx)("fog",{ref:e,attach:"fog",args:["#bf6c00",600,800]})}function A(){return Object(v.jsxs)(n.Suspense,{fallback:null,children:[Object(v.jsx)(N,{}),Object(v.jsx)(k,{}),Object(v.jsx)(B,{})]})}var F=function(e,t){return Math.floor(Math.random()*(t-e+1))-t};function T(e,t,r,n){var c=r-e,o=n-t;return Math.sqrt(c*c+o*o)}var G=-280;function U(){var e=Object(n.useRef)(),t=Object(n.useRef)(),r=f((function(e){return e.ship})),c=f((function(e){return e.level})),o=Object(n.useMemo)((function(){return new u.Object3D}),[]),a=Object(n.useMemo)((function(){for(var e=[],t=0;t<60;t++){var r=F(G,280),n=-900+F(-400,400);e.push({x:r,y:10,z:n})}return e}),[]),s=Object(n.useMemo)((function(){return-c*_*6-3400}),[c]),l=Object(n.useMemo)((function(){return-c*_*6-6e3}),[c]);return Object(i.d)((function(n,c){var i=!1;r.current&&(r.current.position.z>s||r.current.position.z<l)&&(i=!0),a.forEach((function(n,a){if(r.current){if(n.z-r.current.position.z>-15)if(n.x-r.current.position.x>-15||n.x-r.current.position.x<15)T(r.current.position.x,r.current.position.z,n.x,n.z)<12&&(j.gameSpeed=0,j.gameOver=!0);n.z-r.current.position.z>15&&(i?(n.z=r.current.position.z-_+F(-200,0),n.y=-20,n.x=F(G,280)):(n.z=r.current.position.z-3100+F(-200,0),n.y=-20,n.x=F(G,280))),n.y<10&&(n.y+100*c>10?n.y=10:n.y+=100*c)}t.current.color=j.globalColor,o.position.set(n.x,n.y,n.z),o.updateMatrix(),e.current.setMatrixAt(a,o.matrix)})),e.current.instanceMatrix.needsUpdate=!0})),Object(v.jsxs)("instancedMesh",{ref:e,args:[null,null,60],children:[Object(v.jsx)("boxBufferGeometry",{args:[V,V,V]}),Object(v.jsx)("meshBasicMaterial",{ref:t,color:P[2].three})]})}var D=-280;function q(){var e=Object(n.useRef)(),t=Object(n.useRef)(),r=f((function(e){return e.ship})),c=f((function(e){return e.level})),o=f((function(e){return e.gameStarted})),a=Object(n.useMemo)((function(){return new u.Object3D}),[]),s=Object(n.useMemo)((function(){for(var e=[],t=0;t<20;t++){var r=F(D,280),n=-900+F(-400,400);e.push({x:r,y:10,z:n})}return e}),[]),l=Object(n.useMemo)((function(){return-c*_*6-3400}),[c]),b=Object(n.useMemo)((function(){return-c*_*6-6e3}),[c]);return Object(i.d)((function(n,c){var i=!1;r.current&&(r.current.position.z>l||r.current.position.z<b)&&(i=!0),s.forEach((function(n,s){if(r.current){var l=new u.Vector3(r.current.position.x-n.x,0,r.current.position.z-n.z).normalize();o&&(n.z+=l.z*c*50),T(r.current.position.x,r.current.position.z,n.x,n.z)<12&&(j.gameSpeed=0,j.gameOver=!0),n.z-r.current.position.z>15&&(i?(n.z=r.current.position.z-_+F(-200,0),n.y=-15,n.x=F(D,280)):(n.z=r.current.position.z-3100+F(-200,0),n.y=-15,n.x=F(D,280))),n.y<7.5&&(n.y+100*c>7.5?n.y=7.5:n.y+=100*c)}t.current.color=j.globalColor,a.position.set(n.x,n.y,n.z),a.updateMatrix(),e.current.setMatrixAt(s,a.matrix)})),e.current.instanceMatrix.needsUpdate=!0})),Object(v.jsxs)("instancedMesh",{ref:e,args:[null,null,20],children:[Object(v.jsx)("circleBufferGeometry",{args:[L,L,L]}),Object(v.jsx)("meshBasicMaterial",{ref:t,color:P[2].three})]})}var H=r(68);function J(){var e=f((function(e){return e.ship})),t=Object(n.useRef)(),r=Object(n.useRef)();return Object(i.d)((function(n,c){e.current&&(t.current.position.z=e.current.position.z,r.current.position.z=e.current.position.z,(e.current.position.x<=-280||e.current.position.x>=280)&&(j.gameSpeed=0,j.gameOver=!0)),r.current.material.color=j.globalColor,t.current.material.color=j.globalColor})),Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(H.a,{args:[I,2e3,8],position:[E,0,-5],rotation:[Math.PI/2,0,Math.PI],ref:r,children:Object(v.jsx)("meshBasicMaterial",{attach:"material",color:P[0].three})}),Object(v.jsx)(H.a,{args:[I,2e3,8],position:[C,0,-5],rotation:[Math.PI/2,0,Math.PI],ref:t,children:Object(v.jsx)("meshBasicMaterial",{attach:"material",color:P[0].three})})]})}var W=r(45),X=r(23),K=r(41),Q=r(44),Y=r(46),Z=r(47),$=r(42);function ee(){var e=Object(n.useRef)(),t=Object(i.f)(),r=t.scene,c=t.gl,o=t.size,a=t.camera,s=Object(n.useRef)(0),u=f((function(e){return e.musicEnabled}));return Object(n.useEffect)((function(){e.current.setSize(o.width,o.height)}),[o]),Object(i.d)((function(t,r){if(u){var n=e.current.passes[1];j.currentMusicLevel>s.current?s.current=j.currentMusicLevel:s.current-=.5*r,n.strength=s.current>.8?s.current:.8}e.current.render()}),1),Object(v.jsxs)("effectComposer",{ref:e,args:[c],children:[Object(v.jsx)("renderPass",{attachArray:"passes",scene:r,camera:a}),Object(v.jsx)("unrealBloomPass",{attachArray:"passes",args:[void 0,.8,1,.4]}),Object(v.jsx)("shaderPass",{attachArray:"passes",args:[$.a],"material-uniforms-resolution-value":[1/o.width,1/o.height]})]})}Object(i.c)({EffectComposer:W.a,ShaderPass:X.a,RenderPass:K.a,UnrealBloomPass:Y.a,SSAOPass:Q.a,AfterimagePass:Z.a});var te=[];function re(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];Object(n.useEffect)((function(){var n=function(n){if(-1!==e.indexOf(n.key)){var c=!!te[n.keyCode];te[n.keyCode]=!0,!r&&c||t(!0)}},c=function(n){-1!==e.indexOf(n.key)&&(te[n.keyCode]=!1,r&&t(!1))};return window.addEventListener("keydown",n,{passive:!0}),window.addEventListener("keyup",c,{passive:!0}),function(){window.removeEventListener("keydown",n),window.removeEventListener("keyup",c)}}),[e,t,r])}function ne(){var e=f((function(e){return e.set}));return re(["ArrowLeft","a","A"],(function(t){return e((function(e){return Object(b.a)(Object(b.a)({},e),{},{controls:Object(b.a)(Object(b.a)({},e.controls),{},{left:t})})}))})),re(["ArrowRight","d","D"],(function(t){return e((function(e){return Object(b.a)(Object(b.a)({},e),{},{controls:Object(b.a)(Object(b.a)({},e.controls),{},{right:t})})}))})),null}var ce=function(e){return e.ship},oe=function(e){return e.setScore},ae=function(e){return e.gameStarted},ie=function(e){return e.setIsSpeedingUp},se=function(e){return e.setGameOver};function ue(){var e=f(ce),t=f(oe),r=f(ae),c=f(ie),o=f(se),a=f((function(e){return e.level}));return Object(n.useEffect)((function(){j.currentLevelLength=-a*_*6}),[a]),Object(n.useEffect)((function(){r&&(j.desiredSpeed=.8)}),[r]),Object(i.d)((function(n,a){var i=1*a*.15;r&&!j.gameOver&&(j.gameSpeed<j.desiredSpeed?(c(!0),j.gameSpeed+i>j.desiredSpeed?j.gameSpeed=j.desiredSpeed:j.gameSpeed+=i):c(!1)),e.current&&(j.score=Math.abs(e.current.position.z)-10,j.shouldShiftItems=e.current.position.z<-400&&e.current.position.z<j.currentLevelLength-400&&e.current.position.z>j.currentLevelLength-1e3),r&&j.gameOver&&(t(Math.abs(e.current.position.z)-10),o(!0))})),null}function le(e){e.materialRef;var t=Object(n.useRef)(0),r=Object(n.useRef)(0),c=Object(n.useRef)(0),o=Object(n.useRef)(0),a=Object(n.useRef)(0),s=Object(n.useRef)(0),u=Object(n.useRef)(0);return Object(i.d)((function(e,n){if(0===j.colorLevel&&j.globalColor.set(P[0].three),6===j.colorLevel){var i=3*n;c.current<1?(c.current+=i,j.globalColor.lerpColors(P[0].three,P[2].three,c.current)):o.current<1?(o.current+=i,j.globalColor.lerpColors(P[2].three,P[3].three,o.current)):a.current<1?(a.current+=i,j.globalColor.lerpColors(P[3].three,P[1].three,a.current)):s.current<1?(s.current+=i,j.globalColor.lerpColors(P[1].three,P[5].three,s.current)):u.current<1?(u.current+=i,j.globalColor.lerpColors(P[5].three,P[0].three,u.current)):(c.current=0,o.current=0,a.current=0,s.current=0,u.current=0),r.current=0}else j.colorLevel>r.current&&(j.globalColor.lerpColors(P[r.current].three,P[j.colorLevel].three,t.current),t.current+n*j.gameSpeed*.5>1?t.current=1:t.current+=n*j.gameSpeed*.5,1===t.current&&(r.current=j.colorLevel,t.current=0))})),null}var fe=r.p+"static/media/intro-loop.85c70e50.mp3",je=r.p+"static/media/main-nodrums.b36a5309.mp3",be=r.p+"static/media/main-onlydrums.f5b7b0b0.mp3";function de(){var e=Object(n.useRef)(),t=Object(n.useRef)(),r=Object(n.useRef)(),c=Object(n.useRef)(),o=f((function(e){return e.musicEnabled})),a=f((function(e){return e.gameStarted})),s=f((function(e){return e.gameOver})),l=f((function(e){return e.camera})),b=f((function(e){return e.level})),m=f((function(e){return e.hasInteracted})),O=Object(n.useState)((function(){return new u.AudioListener})),h=Object(d.a)(O,1)[0],p=Object(i.e)(u.AudioLoader,fe),x=Object(i.e)(u.AudioLoader,je),g=Object(i.e)(u.AudioLoader,be),y=Object(n.useRef)(),S=Object(n.useRef)(),w=Object(n.useRef)(1),M=Object(n.useRef)(0),z=Object(n.useRef)(0),R=Object(n.useRef)(!0),_=Object(n.useRef)(!1);return Object(n.useEffect)((function(){m&&o&&e.current.context.resume()}),[m,o]),Object(n.useEffect)((function(){e.current.setBuffer(p)}),[p]),Object(n.useEffect)((function(){t.current.setBuffer(x),y.current=t.current.context.createBiquadFilter(),y.current.type="lowpass",y.current.frequency.value=0,t.current.setFilter(y.current)}),[x]),Object(n.useEffect)((function(){r.current.setBuffer(g),S.current=new u.AudioAnalyser(r.current,32)}),[g]),Object(n.useEffect)((function(){var n,c;o||((null===(n=e.current)||void 0===n?void 0:n.isPlaying)&&e.current.stop(),(null===(c=t.current)||void 0===c?void 0:c.isPlaying)&&(t.current.stop(),r.current.stop()))}),[o]),Object(n.useEffect)((function(){var n;o&&!s?e.current.isPlaying||(e.current.play(),R.current=!0):(null===(n=e.current)||void 0===n?void 0:n.isPlaying)&&e.current.stop();if(e.current.setLoop(!0),t.current.setLoop(!0),r.current.setLoop(!0),l.current){var c=l.current;return c.add(h),function(){return c.remove(h)}}}),[o,p,x,g,a,s,l,h]),Object(n.useEffect)((function(){b>0&&b%2===0?(t.current.setPlaybackRate(1+.02*b),r.current.setPlaybackRate(1+.02*b)):0===b&&(t.current.setPlaybackRate(1),r.current.setPlaybackRate(1))}),[b]),Object(i.d)((function(n,c){if(o){if(S.current){var i=u.MathUtils.inverseLerp(0,255,S.current.getFrequencyData()[0]);j.currentMusicLevel=i}a&&!t.current.isPlaying&&e.current.context.currentTime.toFixed(1)%9.6===0&&(_.current=!0,t.current.play(),r.current.play(),t.current.setVolume(0),r.current.setVolume(0)),a&&!s&&M.current<1&&(t.current.isPlaying||(t.current.play(),r.current.play()),y.current.frequency.value+=4e3*c,M.current+.2*c>1?(M.current=1,z.current=1):(M.current+=.2*c,z.current+=.2*c),w.current-.2*c<0?w.current=0:w.current-=.2*c,e.current.setVolume(w.current),t.current.setVolume(M.current),r.current.setVolume(z.current)),s&&w.current<1&&(e.current.isPlaying||e.current.play(),y.current.frequency.value-=4e3*c,M.current-.2*c<0?(M.current=0,z.current=0):(M.current-=.2*c,z.current-=.2*c),w.current+.2*c>1?w.current=1:w.current+=.2*c,e.current.setVolume(w.current),t.current.setVolume(M.current),r.current.setVolume(z.current))}})),Object(v.jsxs)("group",{ref:c,children:[Object(v.jsx)("audio",{ref:e,args:[h]}),Object(v.jsx)("audio",{ref:t,args:[h]}),Object(v.jsx)("audio",{ref:r,args:[h]})]})}function me(){return Object(v.jsx)(n.Suspense,{fallback:null,children:Object(v.jsx)(de,{})})}var Oe=r.p+"static/media/speedup2.ed639f5a.mp3";function he(){var e=Object(n.useRef)(),t=Object(n.useRef)(),r=f((function(e){return e.camera})),c=f((function(e){return e.musicEnabled})),o=f((function(e){return e.level})),a=f((function(e){return e.gameStarted})),s=Object(n.useState)((function(){return new u.AudioListener})),l=Object(d.a)(s,1)[0],j=Object(i.e)(u.AudioLoader,Oe);return Object(n.useEffect)((function(){if(e.current.setBuffer(j),c?e.current.setVolume(.5):e.current.setVolume(0),r.current){var t=r.current;return t.add(l),function(){return t.remove(l)}}}),[j,c,r,l]),Object(n.useEffect)((function(){a&&o>0&&(e.current.setBuffer(j),e.current.play())}),[a,o,j]),Object(v.jsx)("group",{ref:t,children:Object(v.jsx)("audio",{ref:e,args:[l]})})}function pe(){return Object(v.jsx)(n.Suspense,{fallback:null,children:Object(v.jsx)(he,{})})}var xe=r(72),ge=function(e){return"Loading: ".concat(e.toFixed(0),"%")};function ve(e){var t=e.active,r=e.progress,c=e.dataInterpolation,o=void 0===c?ge:c,a=n.useRef(0),i=n.useRef(0),s=n.useRef(null),u=n.useCallback((function(){s.current&&(a.current+=(r-a.current)/2,(a.current>.95*r||100===r)&&(a.current=r),s.current.innerText=o(a.current),a.current<r&&(i.current=requestAnimationFrame(u)))}),[o,r]);return n.useEffect((function(){return u(),function(){return cancelAnimationFrame(i.current)}}),[u]),Object(v.jsx)("div",{style:Object(b.a)(Object(b.a)({},ye.container),{},{opacity:t?1:0}),children:Object(v.jsx)("div",{children:Object(v.jsxs)("div",{style:Object(b.a)({},ye.inner),children:[Object(v.jsx)("div",{style:Object(b.a)(Object(b.a)({},ye.bar),{},{transform:"scaleX(".concat(r/100,")")})}),Object(v.jsx)("div",{style:{marginTop:"1.5rem"},children:Object(v.jsx)("span",{ref:s,style:Object(b.a)({},ye.data)})})]})})})}var ye={container:{display:"flex",alignItems:"center",justifyContent:"center",transition:"opacity 300ms ease",zIndex:1e3},inner:{width:206,height:26,textAlign:"center",borderRadius:"5px",boxShadow:"0 0 20px 0px #bd4902",border:"3px solid #bd4902"},bar:{height:20,width:"100%",background:"#bd4902",transition:"transform 200ms",transformOrigin:"left center",boxShadow:"0 0 20px 0px #bd4902"},data:{textAlign:"center",fontVariantNumeric:"tabular-nums",marginTop:"2rem",color:"#f0f0f0",fontSize:"2em",fontFamily:'\'Commando\', mono, monospace, -apple-system, BlinkMacSystemFont, "Inter", "Segoe UI", "Helvetica Neue", Helvetica, Arial, Roboto, Ubuntu, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',whiteSpace:"nowrap",textShadow:"0 0 20px #bd4902"}},Se=(r(36),function(){var e=Object(n.useState)(!0),t=Object(d.a)(e,2),r=t[0],c=t[1],o=Object(n.useState)(!0),a=Object(d.a)(o,2),i=a[0],s=a[1],u=Object(n.useState)(!1),l=Object(d.a)(u,2),j=l[0],b=l[1],m=Object(xe.a)(),O=m.active,h=m.progress,p=f((function(e){return e.gameStarted})),x=f((function(e){return e.gameOver})),g=f((function(e){return e.setGameStarted})),y=f((function(e){return e.musicEnabled})),S=f((function(e){return e.enableMusic})),w=f((function(e){return e.setHasInteracted}));Object(n.useEffect)((function(){p||x?c(!1):p||c(!0)}),[p,O,x]),Object(n.useEffect)((function(){var e;return j===i&&(e=setTimeout((function(){return s(!j)}),300)),function(){return clearTimeout(e)}}),[j,i]),Object(n.useEffect)((function(){localStorage.setItem("musicEnabled",JSON.stringify(y))}),[y]),Object(n.useEffect)((function(){h>=100&&b(!0)}),[h]);return r?Object(v.jsx)("div",{onClick:function(){return w()},className:"game__container",style:{opacity:r?1:0,background:i?"#141622FF":"#141622CC"},children:Object(v.jsx)("div",{className:"game__menu",children:Object(v.jsx)("div",{className:"game__subcontainer",children:j?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("button",{onClick:function(){g(!0)},className:"game__menu-button",children:"STA>RT"}),Object(v.jsxs)("div",{className:"game__menu-options",children:[Object(v.jsx)("button",{onClick:function(){S(!y)},className:"game__menu-button game__menu-button-music",children:"TURN MUSIC ".concat(y?"OF>F":"O<N")}),Object(v.jsxs)("span",{className:"game__menu-controls",children:[Object(v.jsx)("p",{children:"Controls"}),"\u2190 a / d \u2192"]})]})]}):Object(v.jsx)(ve,{active:O,progress:h})})})}):null}),we=r(43),Me=(r(63),function(){return"".concat(j.score.toFixed(0))});function ze(){var e=f((function(e){return e.set})),t=f((function(e){return e.level})),r=f((function(e){return e.gameOver})),c=f((function(e){return e.gameStarted})),o=f((function(e){return e.isSpeedingUp})),a=Object(n.useState)(!1),s=Object(d.a)(a,2),u=s[0],l=s[1],j=Object(n.useState)(!1),m=Object(d.a)(j,2),O=m[0],h=m[1],p=Object(n.useState)(!1),x=Object(d.a)(p,2),g=x[0],y=x[1],S=Object(n.useState)(!1),w=Object(d.a)(S,2),M=w[0],z=w[1],R=Date.now(),_=Object(n.useRef)(),E=Me();return Object(n.useEffect)((function(){return Object(i.b)((function(){var e=Date.now();e-R>33.3333&&(_.current&&(_.current.innerText=Me()),R=e)}))})),Object(n.useEffect)((function(){O&&(window.oncontextmenu=function(e){return e.preventDefault(),e.stopPropagation(),!1})}),[O]),Object(n.useEffect)((function(){l(!(!c||r))}),[c,r]),Object(n.useEffect)((function(){we.isMobile?h(!0):h(!1)}),[]),Object(n.useEffect)((function(){e((function(e){return Object(b.a)(Object(b.a)({},e),{},{controls:Object(b.a)(Object(b.a)({},e.controls),{},{left:g})})}))}),[e,g]),Object(n.useEffect)((function(){e((function(e){return Object(b.a)(Object(b.a)({},e),{},{controls:Object(b.a)(Object(b.a)({},e.controls),{},{right:M})})}))}),[e,M]),u?Object(v.jsxs)("div",{className:"hud",children:[t>0&&o&&Object(v.jsx)("div",{className:"center",children:Object(v.jsx)("h3",{className:"center__speedup",children:"SPEED UP"})}),O&&Object(v.jsxs)("div",{className:"controls",children:[Object(v.jsx)("button",{onTouchStart:function(){return y(!0)},onTouchEnd:function(){return y(!1)},className:"control control__left ".concat(g?"control-active":""),children:"<"}),Object(v.jsx)("button",{onTouchStart:function(){return z(!0)},onTouchEnd:function(){return z(!1)},className:"control control__right ".concat(M?"control-active":""),children:">"})]}),Object(v.jsx)("div",{className:"bottomRight",children:Object(v.jsxs)("div",{className:"score ".concat(O?"score__withcontrols":""),children:[Object(v.jsx)("h3",{className:"score__title",children:"LEVEL"}),Object(v.jsx)("h1",{className:"score__number",children:t+1}),Object(v.jsx)("h3",{className:"score__title",children:"SCORE"}),Object(v.jsx)("h1",{ref:_,className:"score__number",children:E})]})})]}):null}var Re=r(14),_e=function(){var e=localStorage.getItem("highscores")?JSON.parse(localStorage.getItem("highscores")):Object(Re.a)(Array(3).fill(0)),t=Object(n.useState)(!1),r=Object(d.a)(t,2),c=r[0],o=r[1],a=Object(n.useState)(!1),i=Object(d.a)(a,2),s=i[0],u=i[1],l=Object(n.useState)(e),j=Object(d.a)(l,2),b=j[0],m=j[1],O=f((function(e){return e.gameOver})),h=f((function(e){return e.score}));Object(n.useEffect)((function(){var e;return O!==s&&(e=setTimeout((function(){return u(O)}),500)),function(){return clearTimeout(e)}}),[O,s]),Object(n.useEffect)((function(){o(!!O)}),[O]),Object(n.useEffect)((function(){if(O&&b.some((function(e){return h>e}))){var e=b.sort((function(e,t){return e-t}));e[0]=h.toFixed(0);var t=e.sort((function(e,t){return t-e}));m(t),localStorage.setItem("highscores",JSON.stringify(t))}}),[O,b,h]);return c?Object(v.jsx)("div",{className:"game__container",style:{opacity:c?1:0,background:s?"#141622FF":"#141622CC"},children:Object(v.jsxs)("div",{className:"game__menu",children:[Object(v.jsx)("h1",{className:"game__score-gameover",children:"GAME OVER"}),Object(v.jsxs)("div",{className:"game__scorecontainer",children:[Object(v.jsxs)("div",{className:"game__score-left",children:[Object(v.jsx)("h1",{className:"game__score-title",children:"SCORE"}),Object(v.jsx)("h1",{className:"game__score",children:h.toFixed(0)})]}),Object(v.jsxs)("div",{className:"game__score-right",children:[Object(v.jsx)("h1",{className:"game__score-title",children:"HIGH SCORES"}),b.map((function(e,t){return Object(v.jsxs)("div",{className:"game__score-highscore",children:[Object(v.jsx)("span",{className:"game__score-number",children:t+1}),Object(v.jsx)("span",{style:{textDecoration:h.toFixed(0)===e?"underline":"none"},className:"game__score-score",children:e>0?e:"-"})]},"".concat(t,"-").concat(h))}))]})]}),Object(v.jsx)("button",{onClick:function(){window.location.reload()},className:"game__menu-button",children:"RESTART"})]})}):null};function Ee(e){e.color;var t=e.bgColor,r=f((function(e){return e.directionalLight}));return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(i.a,{gl:{antialias:!1,alpha:!1},mode:"concurrent",dpr:[1,1.5],style:{background:"".concat(t)},children:Object(v.jsxs)(n.Suspense,{fallback:null,children:[Object(v.jsx)(ue,{}),Object(v.jsx)(A,{}),Object(v.jsx)("directionalLight",{ref:r,intensity:3,position:[0,Math.PI,0]}),Object(v.jsx)("ambientLight",{intensity:.1}),Object(v.jsx)(M,{children:r.current&&Object(v.jsx)("primitive",{object:r.current.target})}),Object(v.jsx)(J,{}),Object(v.jsx)(U,{}),Object(v.jsx)(q,{}),Object(v.jsx)(ne,{}),Object(v.jsx)(ee,{}),Object(v.jsx)(le,{}),Object(v.jsx)(me,{}),Object(v.jsx)(pe,{}),Object(v.jsx)(s.a,{all:!0})]})}),Object(v.jsx)(ze,{}),Object(v.jsx)(_e,{}),Object(v.jsx)(Se,{})]})}a.a.createRoot(document.getElementById("root")).render(Object(v.jsx)(c.a.StrictMode,{children:Object(v.jsx)(Ee,{bgColor:"#ff2919"})}))}},[[64,1,2]]]);
//# sourceMappingURL=main.a1163872.chunk.js.map